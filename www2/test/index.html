<html>
   <head>
      <title>OpenLayers Demo</title>
      <style type="text/css">
         html, body, #map {
            width: 100%;
            height: 100%;
            margin: 0;
         }
      </style>
      <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
      <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
      <script>
       var lon = 5;
        var lat = 40;
        var zoom = 5;
        var map;
        var vector;
        var geometry;
        var centerLon = 37.623281;
        var centerLat = 55.755206;

        function createVector(){
           var layer_style = OpenLayers.Util.extend({}, OpenLayers.Feature.Vector.style['default']);
           layer_style.fillOpacity = 0.2;
           layer_style.graphicOpacity = 1;

           var line_style = {
              strokeColor: "#FF0000",
              strokeWidth: 6,
              pointRadius: 6,
              pointerEvents: "visiblePainted"
           };

           vector = new OpenLayers.Layer.Vector("Track Geometry", {style: layer_style});
           var points = [];
           points.push(new OpenLayers.Geometry.Point(37.623281, 55.755206).transform(map.displayProjection, map.projection));
           points.push(new OpenLayers.Geometry.Point(37.623281, 54.755206).transform(map.displayProjection, map.projection));

           geometry = new OpenLayers.Geometry.LineString(points);
           var line = new OpenLayers.Feature.Vector(geometry, null, line_style);
           //geometry.addPoint(new OpenLayers.Geometry.Point(36.623281, 55.755206).transform(map.displayProjection, map.projection));

           map.addLayer(vector);
           vector.addFeatures([line]);
        }

        function update() {
           geometry.addPoint(new OpenLayers.Geometry.Point(centerLon + Math.random(1), centerLat + Math.random(1)).transform(map.displayProjection, map.projection));
           vector.redraw();
           setTimeout("update();", 3000);
        }

        function init(){
            var options = {
                projection: new OpenLayers.Projection("EPSG:900913"),
                displayProjection: new OpenLayers.Projection("EPSG:4326"),
                units: "m",
                maxResolution: 156543.0339,
                maxExtent: new OpenLayers.Bounds(-20037508.34, -20037508.34,
                                                 20037508.34, 20037508.34)
            };
            map = new OpenLayers.Map('map', options);
            var mapnik = new OpenLayers.Layer.OSM("OpenStreetMap (Mapnik)");
            var gmap = new OpenLayers.Layer.Google("Google", {sphericalMercator:true});
 
            map.addLayers([mapnik, gmap]);
 
            map.addControl(new OpenLayers.Control.LayerSwitcher());

            map.setCenter(new OpenLayers.LonLat(37.623281, 55.755206).transform(map.displayProjection, map.projection), 12);

            createVector();

            update();
      }

      </script>
   </head>
   <body onload="init();">
      <div id="map"></div>
   </body>
</html>
